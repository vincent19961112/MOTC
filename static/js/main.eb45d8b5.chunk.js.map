{"version":3,"sources":["style.js","pages/ScenicSpot/store/ActionTypes.js","pages/ScenicSpot/store/reducer.js","pages/ScenicSpot/store/ActionCreators.js","pages/ScenicSpotCity/store/ActionTypes.js","pages/ScenicSpotCity/store/reducer.js","pages/ScenicSpotCity/store/ActionCreators.js","pages/SpotDetail/store/ActionTypes.js","pages/SpotDetail/store/reducer.js","pages/SpotDetail/store/ActionCreators.js","pages/ScenicSpotMap/store/ActionTypes.js","pages/ScenicSpotMap/store/reudcer.js","pages/ScenicSpotMap/store/ActionCreators.js","store/reducer.js","store/index.js","common/header/style.js","common/header/index.js","pages/home/style.js","pages/home/index.js","pages/ScenicSpot/style.js","pages/ScenicSpot/components/SpotList.js","pages/ScenicSpot/index.js","pages/ScenicSpotCity/style.js","pages/ScenicSpotCity/components/SpotCityList.js","pages/ScenicSpotCity/components/CityNavbar.js","pages/ScenicSpotCity/index.js","pages/SpotDetail/style.js","pages/SpotDetail/components/CityDetail.js","pages/SpotDetail/index.js","pages/ScenicSpotMap/style.js","pages/ScenicSpotMap/components/SideNavber.js","pages/ScenicSpotMap/components/Mapbox.js","assets/mapbox/nowMarker.png","pages/ScenicSpotMap/index.js","App.js","index.js"],"names":["GlobalStyle","createGlobalStyle","CHANGE_ALL_LIST","LOADING","LOADED","HAS_NO_MORE","defaultState","fromJS","scenicSpotList","loading","hasMore","reducer","state","action","type","ActionTypes","set","data","loaded","hasNoMore","changeList","List","getSpotList","prevState","dispatch","length","axios","get","params","$top","$format","then","res","catch","console","log","getMoreSpotList","index","$skip","moreData","CHANGE_CITY_LIST","City","CityName","CityNameEN","Citylist","setIn","getSpotCityList","city","cityIndex","getMoreSpotCityList","GET_DETAIL","CityDetail","getCityDetail","ID","$filter","GET_MAP_ALL_COORDINATES","GET_SPOT_CITY_INDEX","FIX_LNG_CHANGE","FIX_LAT_CHANGE","FIX_ZOOM_CHANGE","FIX_CITY_INDEX","IS_NEW_COORDINATES","NOT_NEW_COORDINATES","lng","lat","zoom","isNewCoordinates","undefined","stores","GetAllCity","features","map","item","Name","Address","Position","PositionLat","PositionLon","push","store","GetMapAllCoordinates","getSpotCityIndex","fixLngChange","fixLatChange","fixZoomChange","fixNewCoordinates","prevlng","prevlat","notNewCoordinates","combineReducers","scenicSpot","scenicSpotReducer","spotCity","SpotCityReducer","spotDetail","SpotDetailReducer","SpotMap","SpotMapReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","HeaderWrapper","styled","div","HeaderTitle","HeaderNavbar","NavLink","Link","connect","getIn","handleSpotList","list","ActionCreators","props","toJS","to","onClick","HomeWrapper","HomeTitle","HomeContent","HomeFooter","home","Component","Loading","LinkWrapper","SpotListCard","SpotTitle","CardTitle","CardSubTitle","SpotContent","handleloading","handlehasMoreList","observer","useRef","lastElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","Description","Picture","ref","className","alt","PictureDescription1","src","PictureUrl1","ScenicSpot","Navbar","NavItem","SpotCityList","handleLoading","handleHasMoreList","urlParams","useParams","Object","values","slice","indexOf","cityname","cityCN","cityEN","listIndex","items","handleSpotCityList","ScenicSpotCity","DetailCard","DetailContent","DetailTitle","DetailTime","DetailSrcUpdateTime","DetailUpdateTime","DetailSubscription","DetailPhone","DetailAddress","DetailZipCode","DetailTravelInfo","DetailOpenTime","DetailPicture","img","DetailWrapper","DetailTicketInfo","DetailRemarks","handleDateFormat","Date","startIndex","Year","lastIndex","lastIndexOf","Time","handleCityDetail","id","url","Detail","detailId","prevID","SrcUpdateTime","UpdateTime","DescriptionDetail","Phone","ZipCode","TravelInfo","OpenTime","TicketInfo","Remarks","SpotDetail","ScenicMapWrapper","SideNavbarWrapper","NavbarCityNav","NavItemWrapper","NavbarCityNavItem","NavItemTitle","NavItemAddress","NavItemPhone","MapContent","getNavCityNameList","listAll","handleSpotIndex","getNavCityList","handleLng","handleLat","handleZoom","handleNewCoordinates","Number","CityListCreators","MapboxCreators","CityAll","mapboxgl","workerClass","MapboxWorker","accessToken","handleGetAllCity","mapContainer","Stores","useEffect","Map","container","style","center","on","loadImage","error","image","addImage","addSource","addLayer","flyTo","flyToStore","e","coordinates","geometry","name","properties","address","Math","abs","lngLat","Popup","setLngLat","setHTML","addTo","CreatorPopup","getCanvas","cursor","remove","ScenicSpotMap","Mapbox","App","basename","process","path","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.eb45d8b5.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components';\r\n \r\nexport const GlobalStyle = createGlobalStyle`\r\n  html, body, div, span, applet, object, iframe,\r\n  h1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\n  a, abbr, acronym, address, big, cite, code,\r\n  del, dfn, em, img, ins, kbd, q, s, samp,\r\n  small, strike, strong, sub, sup, tt, var,\r\n  b, u, i, center,\r\n  dl, dt, dd, ol, ul, li,\r\n  fieldset, form, label, legend,\r\n  table, caption, tbody, tfoot, thead, tr, th, td,\r\n  article, aside, canvas, details, embed, \r\n  figure, figcaption, footer, header, hgroup, \r\n  menu, nav, output, ruby, section, summary,\r\n  time, mark, audio, video {\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    font-size: 100%;\r\n    font: inherit;\r\n    vertical-align: baseline;\r\n  }\r\n  article, aside, details, figcaption, figure, \r\n  footer, header, hgroup, menu, nav, section {\r\n    display: block;\r\n  }\r\n  body {\r\n    line-height: 1;\r\n  }\r\n  ol, ul {\r\n    list-style: none;\r\n  }\r\n  blockquote, q {\r\n    quotes: none;\r\n  }\r\n  blockquote:before, blockquote:after,\r\n  q:before, q:after {\r\n    content: '';\r\n    content: none;\r\n  }\r\n  table {\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\r\n  }\r\n\r\n`\r\n","export const CHANGE_ALL_LIST = 'SpotList/CHANGE_ALL_LIST';\r\nexport const LOADING = 'SpotList/LOADING';\r\nexport const LOADED = 'SpotList/LOADED';\r\nexport const HAS_MORE = 'SpotList/HAS_MORE';\r\nexport const HAS_NO_MORE = 'SpotList/HAS_NO_MORE';","import { fromJS } from 'immutable';\r\nimport * as ActionTypes from './ActionTypes';\r\nconst defaultState = fromJS({\r\n   scenicSpotList: [],\r\n   loading: false,\r\n   hasMore: true\r\n})\r\n\r\nconst reducer = (state=defaultState,action) =>{\r\n switch(action.type) {\r\n  case ActionTypes.LOADING:\r\n   return state.set('loading', true)\r\n  case ActionTypes.LOADED:\r\n   return state.set('loading', false)\r\n  case ActionTypes.HAS_NO_MORE:\r\n   return state.set('hasMore', false)\r\n  case ActionTypes.CHANGE_ALL_LIST:\r\n   return state.set('scenicSpotList',action.data)\r\n  default:\r\n  return state\r\n }\r\n}\r\n\r\nexport default reducer\r\n","import * as ActionTypes from './ActionTypes';\r\nimport { List } from 'immutable';\r\nimport axios from 'axios';\r\n\r\nexport const loading = () =>({\r\n  type: ActionTypes.LOADING\r\n})\r\n\r\nexport const loaded = () =>({\r\n  type: ActionTypes.LOADED\r\n})\r\n\r\nexport const hasNoMore = () =>({\r\n  type: ActionTypes.HAS_NO_MORE\r\n})\r\n\r\nconst changeList = (data) =>({\r\n  type: ActionTypes.CHANGE_ALL_LIST,\r\n  data: List(data)\r\n})\r\n\r\nexport const getSpotList = (prevState) =>{\r\n  return (dispatch) =>{\r\n    if(prevState.length === 0){\r\n      axios.get('https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot',{ params: {$top: 30, $format:'JSON'}})\r\n      .then((res)=>{\r\n      dispatch(changeList(res.data));\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const getMoreSpotList = (prevState, hasMore, index, loading) =>{\r\n  return (dispatch) =>{\r\n    if(hasMore && loading){\r\n       axios.get('https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot',{ params: {$top: 30, $skip: index, $format:'JSON'}})\r\n      .then((res)=>{\r\n      const moreData = [...prevState,...res.data]\r\n      if(res.data.length === 0 && hasMore){\r\n        dispatch(hasNoMore())\r\n      }else{\r\n        dispatch(changeList(moreData));\r\n      }\r\n      dispatch(loaded());\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n","export const CHANGE_CITY_LIST = 'SpotCityList/CHANGE_CITY_LIST';\r\nexport const LOADING = 'SpotCityList/LOADING';\r\nexport const LOADED = 'SpotCityList/LOADED';\r\nexport const HAS_NO_MORE = 'SpotCityList/HAS_NO_MORE';","import { fromJS } from 'immutable';\r\nimport * as ActionTypes from './ActionTypes';\r\n\r\nconst defaultState = fromJS({\r\n   City:[\r\n      { CityName:'臺北市', CityNameEN:'Taipei', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'新北市', CityNameEN:'NewTaipei', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'桃園市', CityNameEN:'Taoyuan', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'台中市', CityNameEN:'Taichung', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'臺南市', CityNameEN:'Tainan', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'高雄市', CityNameEN:'Kaohsiung', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'基隆市', CityNameEN:'Keelung', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'新竹市', CityNameEN:'Hsinchu', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'新竹縣', CityNameEN:'HsinchuCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'苗栗縣', CityNameEN:'MiaoliCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'彰化縣', CityNameEN:'ChanghuaCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'南投縣', CityNameEN:'NantouCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'雲林縣', CityNameEN:'YunlinCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'嘉義縣', CityNameEN:'ChiayiCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'嘉義市', CityNameEN:'Chiayi', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'屏東縣', CityNameEN:'PingtungCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'宜蘭縣', CityNameEN:'YilanCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'花蓮縣', CityNameEN:'HualienCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'臺東縣', CityNameEN:'TaitungCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'金門縣', CityNameEN:'KinmenCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'澎湖縣', CityNameEN:'PenghuCounty', Citylist:[], hasMore: true, loading: false },\r\n      { CityName:'連江縣', CityNameEN:'LienchiangCounty', Citylist:[], hasMore: true, loading: false },\r\n   ]\r\n})\r\n\r\nconst reducer = (state=defaultState, action) =>{\r\n switch(action.type) {\r\n  case ActionTypes.LOADING:\r\n   return state.setIn(['City', action.index,'loading'], true)\r\n  case ActionTypes.LOADED:\r\n   return state.setIn(['City', action.index,'loading'], false)\r\n  case ActionTypes.HAS_NO_MORE:\r\n   return state.setIn(['City', action.index,'hasMore'], false)\r\n  case ActionTypes.CHANGE_CITY_LIST:\r\n   return state.setIn(['City', action.index,'Citylist'], action.data) \r\n  default:\r\n  return state\r\n }\r\n}\r\n\r\nexport default reducer\r\n ","import * as ActionTypes from './ActionTypes';\r\nimport { List } from 'immutable';\r\nimport axios from 'axios';\r\n\r\nconst changeList = (data, index) =>({\r\n  type: ActionTypes.CHANGE_CITY_LIST,\r\n  data: List(data),\r\n  index\r\n})\r\n\r\nexport const loading = (index) =>({\r\n  type: ActionTypes.LOADING,\r\n  index\r\n})\r\n\r\nexport const loaded = (index) =>({\r\n  type: ActionTypes.LOADED,\r\n  index\r\n})\r\n\r\nexport const hasNoMore = (index) =>({\r\n  type: ActionTypes.HAS_NO_MORE,\r\n  index\r\n})\r\n\r\nexport const getSpotCityList = (city, cityIndex, prevState) =>{\r\n  return (dispatch) =>{\r\n    if(prevState.length === 0){\r\n      axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/${city}`,{ params: {$top: 30, $format:'JSON'}})\r\n      .then((res)=>{\r\n      const action = changeList(res.data, cityIndex)\r\n      dispatch(action);\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const getMoreSpotCityList = (city, cityIndex, prevState, hasMore, index, loading) =>{ \r\n  return (dispatch) =>{\r\n    if(hasMore && loading){\r\n      axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot/${city}` ,{ params: {$top: 30, $skip: index, $format:'JSON'}})\r\n      .then((res)=>{\r\n      const moreData = [...prevState,...res.data]\r\n      if(res.data.length === 0){\r\n        dispatch(hasNoMore(cityIndex))\r\n      }else{\r\n        dispatch(changeList(moreData, cityIndex));\r\n      }\r\n      dispatch(loaded(cityIndex));\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n    }\r\n  }\r\n}\r\n","export const GET_DETAIL = 'SpotDetail/GET_DETAIL';","import { fromJS } from 'immutable';\r\nimport * as ActionTypes from './ActionTypes';\r\n\r\nconst defaultState = fromJS({\r\n  CityDetail:[]\r\n})\r\n\r\nconst reducer = (state = defaultState, action) =>{\r\n switch (action.type) {\r\n  case ActionTypes.GET_DETAIL:\r\n    return state.set('CityDetail', action.data)\r\n  default:\r\n   return state\r\n }\r\n}\r\n\r\nexport default reducer","import * as ActionTypes from './ActionTypes';\r\nimport { List } from 'immutable';\r\nimport axios from 'axios';\r\n\r\nconst CityDetail = (data) =>({\r\n type:ActionTypes.GET_DETAIL,\r\n data: List(data)\r\n})\r\n\r\nexport const getCityDetail = (ID) =>{\r\n  return (dispatch) =>{\r\n      axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot`,{ params: {$filter: `id eq '${ID}'`, $format:'JSON'}})\r\n      .then((res)=>{\r\n      const action = CityDetail(res.data)\r\n      dispatch(action);\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n  }\r\n}","export const GET_MAP_ALL_COORDINATES = 'ScenicSpotMap/GET_MAP_ALL_COORDINATES';\r\nexport const GET_SPOT_CITY_INDEX = 'ScenicSpotMap/GET_SPOT_CITY_INDEX';\r\nexport const FIX_LNG_CHANGE = 'ScenicSpotMap/FIX_LNG_CHANGE';\r\nexport const FIX_LAT_CHANGE = 'ScenicSpotMap/FIX_LAT_CHANGE';\r\nexport const FIX_ZOOM_CHANGE = 'ScenicSpotMap/FIX_ZOOM_CHANGE';\r\nexport const FIX_CITY_INDEX = 'ScenicSpotMap/FIX_CITY_INDEX';\r\nexport const IS_NEW_COORDINATES = 'ScenicSpotMap/IS_NEW_COORDINATES';\r\nexport const NOT_NEW_COORDINATES = 'ScenicSpotMap/NOT_NEW_COORDINATES';","import * as ActionTypes from './ActionTypes';\r\nimport { fromJS } from 'immutable';\r\n\r\nconst defaultState = fromJS({\r\n lng: 121.5,\r\n lat: 25.08,\r\n zoom: 9,\r\n isNewCoordinates: false,\r\n cityIndex: undefined,\r\n stores : {}\r\n})\r\n\r\nconst reducer = (state=defaultState, action) =>{\r\n switch (action.type) {\r\n  case ActionTypes.GET_MAP_ALL_COORDINATES:\r\n   return state.set('stores', fromJS(action.data))\r\n  case ActionTypes.GET_SPOT_CITY_INDEX:\r\n   return state.set('cityIndex', action.data)\r\n  case ActionTypes.FIX_LNG_CHANGE:\r\n   return state.set('lng', action.data)\r\n  case ActionTypes.FIX_LAT_CHANGE:\r\n   return state.set('lat', action.data)\r\n  case ActionTypes.FIX_ZOOM_CHANGE:\r\n   return state.set('zoom', action.data)\r\n  case ActionTypes.FIX_CITY_INDEX:\r\n   return state.set('cityIndex', action.data)\r\n  case ActionTypes.IS_NEW_COORDINATES:\r\n   return state.set('isNewCoordinates', action.data)\r\n  case ActionTypes.NOT_NEW_COORDINATES:\r\n   return state.set('isNewCoordinates', action.data)\r\n  default:\r\n   return state\r\n }\r\n}\r\n\r\nexport default reducer\r\n","import * as ActionTypes from './ActionTypes';\r\nimport axios from 'axios';\r\n\r\nconst isNewCoordinates = (data) =>({\r\n  type: ActionTypes.IS_NEW_COORDINATES,\r\n  data\r\n})\r\n\r\nconst notNewCoordinates = (data) =>({\r\n  type: ActionTypes.NOT_NEW_COORDINATES,\r\n  data\r\n})\r\n\r\nconst GetMapAllCoordinates = (store) =>({\r\n  type: ActionTypes.GET_MAP_ALL_COORDINATES,\r\n  data: store\r\n})\r\n\r\n\r\nexport const GetAllCity = () =>{\r\n  return (dispatch) =>{\r\n       axios.get('https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot',{ params: {$format:'JSON'}})\r\n      .then((res)=>{\r\n\r\n        const features = [];\r\n        \r\n        res.data.map(item=>{\r\n          const { ID , Name, Address } = item;\r\n          const { PositionLat, PositionLon } = item.Position;\r\n          features.push(\r\n            {\r\n              \"type\": \"Feature\",\r\n              \"geometry\": { \r\n                \"type\": \"Point\", \r\n                \"coordinates\":[PositionLon, PositionLat]\r\n              }, \r\n              \"properties\":{\r\n                \"id\": `${ID}`,\r\n                \"address\": `${Address}`,\r\n                \"name\": `${Name}`\r\n              }\r\n            })\r\n            return features\r\n        })\r\n               \r\n        const store = {\r\n          type: \"FeatureCollection\",\r\n          features: [...features]\r\n        }\r\n\r\n        dispatch(GetMapAllCoordinates(store))\r\n      }).catch(()=>{\r\n        console.log('error');\r\n      })\r\n  }\r\n}\r\n\r\nexport const getSpotCityIndex = (data) =>({\r\n type: ActionTypes.GET_SPOT_CITY_INDEX,\r\n data\r\n})\r\n\r\nexport const fixLngChange = (data) =>({\r\n type: ActionTypes.FIX_LNG_CHANGE,\r\n data\r\n})\r\n\r\nexport const fixLatChange = (data) =>({\r\n type: ActionTypes.FIX_LAT_CHANGE,\r\n data\r\n})\r\n\r\nexport const fixZoomChange = (data) =>({\r\n type: ActionTypes.FIX_ZOOM_CHANGE,\r\n data\r\n})\r\n\r\nexport const fixNewCoordinates = (prevlng, prevlat, lng, lat) =>{\r\n return (dispatch) =>{\r\n   if(prevlng !== lng || prevlat !== lat){\r\n    dispatch(isNewCoordinates(false))\r\n  }else{\r\n    dispatch(notNewCoordinates(true))\r\n  }\r\n }\r\n}\r\n","import { combineReducers } from 'redux-immutable';\r\nimport { reducer as scenicSpotReducer } from '../pages/ScenicSpot/store';\r\nimport { reducer as SpotCityReducer } from '../pages/ScenicSpotCity/store';\r\nimport { reducer as SpotDetailReducer } from '../pages/SpotDetail/store';\r\nimport { reducer as SpotMapReducer } from '../pages/ScenicSpotMap/store';\r\n\r\nconst reducer = combineReducers({\r\n scenicSpot: scenicSpotReducer,\r\n spotCity: SpotCityReducer,\r\n spotDetail: SpotDetailReducer,\r\n SpotMap: SpotMapReducer\r\n})\r\n\r\nexport default reducer","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducer from './reducer';\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store","import styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const HeaderWrapper = styled.div`\r\n text-align: center;\r\n height: 130px;\r\n width:100%;\r\n border-bottom:2px solid #eee;\r\n`\r\n\r\nexport const HeaderTitle = styled.div`\r\n  margin:20px 0;\r\n`\r\n\r\nexport const HeaderNavbar = styled.div`\r\n display:flex;\r\n justify-content:center;\r\n`\r\n\r\n\r\nexport const NavLink = styled(Link)`\r\n  text-decoration: none;\r\n  font-weight:bold;\r\n  cursor:pointer;\r\n  margin: 0 10px;\r\n  padding: 10px;\r\n  font-size:20px;\r\n  border:1px solid black;\r\n  &:hover {\r\n  background:black;\r\n  color:white;\r\n  border:1px solid white;\r\n  }\r\n  color:black;\r\n  &:focus{\r\n  background:black;\r\n  color:white;\r\n  border:1px solid white;\r\n  }\r\n`;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { ActionCreators } from '../../pages/ScenicSpot/store';\r\nimport { HeaderWrapper, HeaderTitle, HeaderNavbar, NavLink } from './style';\r\n\r\nfunction Header(props) {\r\n\r\n  const { handleSpotList, scenicSpotList } = props;\r\n  const list = scenicSpotList.toJS();\r\n\r\n  return (\r\n  <HeaderWrapper>\r\n    <HeaderTitle>MOTC</HeaderTitle>\r\n    <HeaderNavbar>\r\n        <NavLink\r\n        to={'/scenicSpot'}\r\n        onClick={()=>handleSpotList(list)}\r\n        >全部</NavLink>\r\n        <NavLink \r\n        to={`/scenicSpot/city/${'臺北市'}`}\r\n        >縣市</NavLink>\r\n        <NavLink \r\n        to={`/scenicSpot/ScenicSpotMap`}\r\n        >地圖</NavLink>\r\n    </HeaderNavbar>\r\n  </HeaderWrapper>\r\n  )\r\n\r\n}\r\n\r\n\r\nconst mapState = (state) => {\r\n return {\r\n  scenicSpotList: state.getIn(['scenicSpot','scenicSpotList'])\r\n }\r\n}\r\n\r\n\r\nconst mapDispatch = (dispatch) => {\r\n  return {\r\n    handleSpotList(list){\r\n      dispatch(ActionCreators.getSpotList(list))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(Header)","import styled from 'styled-components';\r\n\r\n\r\nexport const HomeWrapper = styled.div`\r\n padding: 80px 0;\r\n margin: 150px 100px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n `\r\n\r\nexport const HomeTitle = styled.div`\r\n text-align: center;\r\n font-size: 25px;\r\n font-weight: 800;\r\n `\r\n\r\nexport const HomeContent = styled.div`\r\n margin-top: 50px;\r\n text-align: center;\r\n font-size: 15px;\r\n font-weight: 400;\r\n `\r\n\r\n\r\nexport const HomeFooter = styled.div`\r\n margin-top: 50px;\r\n text-align: center;\r\n font-size: 20px;\r\n font-weight: 600;\r\n `\r\n\r\n","import React, { Component } from 'react';\r\nimport { HomeWrapper, HomeTitle, HomeContent, HomeFooter } from './style';\r\n\r\nclass home extends Component {\r\n \r\n render(){\r\n  return (\r\n    <HomeWrapper>\r\n     <HomeTitle>MOTC 觀光景點</HomeTitle>\r\n      <HomeContent>\r\n        使用套件<br/>axios<br/>\r\n        immutable<br/>\r\n        react-immutable<br/>\r\n        react-redux<br/>\r\n        react-router-dom<br/>\r\n        react-thunk<br/>\r\n        redux<br/>\r\n        redux-immutable<br/>\r\n        styled-components\r\n      </HomeContent>\r\n     <HomeFooter>作者: 許鐸鐙</HomeFooter>\r\n    </HomeWrapper>\r\n  )\r\n }\r\n \r\n}\r\n\r\nexport default home","import styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const Loading = styled.div`\r\n padding: 20px;\r\n text-align: center;\r\n font-size: 40px;\r\n line-height:40px;\r\n height:250px;\r\n`\r\nexport const LinkWrapper = styled(Link)`\r\n  text-decoration: none;\r\n  color:#777\r\n`\r\n\r\nexport const SpotListCard = styled.div`\r\n z-index: 1;\r\n overflow: hidden;\r\n cursor: pointer;\r\n min-height: 200px;\r\n position: relative;\r\n margin: 50px 30px;\r\n padding: 15px 30px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n .SpotListImg{\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  right: 20px;\r\n  width:150px;\r\n  height:150px;\r\n }\r\n  &:after {\r\n   z-index: -1;\r\n   position: absolute;\r\n   bottom: 10px;\r\n   left: 10px;\r\n   content: '${(props)=>props.index}';\r\n   font-size: 80px;\r\n   color: #888;\r\n   opaticy: 0.2;\r\n   transform: skewX(-36deg);\r\n  }\r\n`\r\n\r\nexport const SpotTitle = styled.div`\r\n z-index: 2;\r\n font-size: 25px;\r\n font-weight: 800;\r\n text-align: center;\r\n line-height: 75px;\r\n height: 75px;\r\n width: 100%;\r\n background: whitesmoke;\r\n color: #888; \r\n`\r\n\r\nexport const CardTitle = styled.div`\r\n z-index: 2;\r\n font-size: 25px;\r\n padding:10px 30px;\r\n`\r\n\r\nexport const CardSubTitle = styled.div`\r\n font-size: 15px;\r\n padding:10px 35px;\r\n`\r\n\r\nexport const SpotContent = styled.div`\r\n z-index: 2;\r\n max-width:50%;\r\n margin-top: 10px;\r\n padding:0px 30px;\r\n`","import React, { useRef, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { ActionCreators } from '../store';\r\nimport { SpotListCard, CardTitle, SpotContent, CardSubTitle, Loading, LinkWrapper } from '../style';\r\n\r\nfunction SpotList(props) {\r\n\r\n  const { scenicSpotList, hasMore, loading, handleloading, handlehasMoreList } = props;\r\n  const list = scenicSpotList.toJS();\r\n\r\n  const observer = useRef()\r\n\r\n  const lastElementRef = useCallback((node) => {\r\n    if(observer.current) observer.current.disconnect()\r\n    observer.current = new IntersectionObserver(entries => {\r\n      if(entries[0].isIntersecting){\r\n        handleloading()\r\n        handlehasMoreList(list, hasMore, list.length, loading);\r\n      }\r\n    })\r\n    if(node) observer.current.observe(node)\r\n  },[hasMore, loading, handleloading, handlehasMoreList, list]) \r\n\r\n   if(list.length === 0 && !loading){\r\n    return <Loading>Loading...</Loading>\r\n   }else{\r\n    return (\r\n      list.map((item, index)=>{\r\n        const { ID, Name, Address, Description } = item\r\n        const Picture = item.Picture\r\n        if(list.length === index + 1){\r\n            return (\r\n              <LinkWrapper key={ID} to={`scenicSpot/scenicSpotDetail/${ID}`}>\r\n                <SpotListCard index={index + 1} ref={lastElementRef}>\r\n                  <CardTitle>{Name}</CardTitle>\r\n                  <CardSubTitle>{Address}</CardSubTitle>\r\n                  <SpotContent>{Description ? Description : '沒有簡介'}</SpotContent>\r\n                  <img className='SpotListImg' alt={Picture.PictureDescription1} src={Picture.PictureUrl1 ? Picture.PictureUrl1 : '沒有圖片'}/>\r\n                </SpotListCard>\r\n              </LinkWrapper>\r\n          )\r\n        } else{\r\n            return (\r\n                <LinkWrapper key={ID} to={`scenicSpot/scenicSpotDetail/${ID}`}>\r\n                <SpotListCard index={index + 1}>\r\n                  <CardTitle>{Name}</CardTitle>\r\n                  <CardSubTitle>{Address}</CardSubTitle>\r\n                  <SpotContent>{Description ? Description : '沒有簡介'}</SpotContent>\r\n                  <img className='SpotListImg' alt={Picture.PictureDescription1} src={Picture.PictureUrl1 ? Picture.PictureUrl1 : '沒有圖片'}/>\r\n                </SpotListCard>\r\n              </LinkWrapper>\r\n          )\r\n        }\r\n      })\r\n    )\r\n  }  \r\n}\r\nconst mapState = (state) => {\r\n return {\r\n  scenicSpotList: state.getIn(['scenicSpot','scenicSpotList']),\r\n  loading: state.getIn(['scenicSpot','loading']),\r\n  hasMore: state.getIn(['scenicSpot','hasMore'])\r\n }\r\n}\r\n\r\nconst mapDispatch = (dispatch) => {\r\n return { \r\n   handleloading(){\r\n     dispatch(ActionCreators.loading())\r\n   },\r\n   handlehasMoreList(prevState, hasMore, index, loading){\r\n     dispatch(ActionCreators.getMoreSpotList(prevState, hasMore, index, loading))\r\n   }\r\n }\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(SpotList)","import React, { Component } from 'react';\r\nimport SpotList from './components/SpotList';\r\nimport { SpotTitle } from './style';\r\n\r\nclass ScenicSpot extends Component {\r\n \r\n render(){\r\n  return (\r\n   <>\r\n    <SpotTitle>風景</SpotTitle> \r\n    <SpotList />\r\n   </>\r\n  )\r\n }\r\n \r\n}\r\n\r\nexport default ScenicSpot","import styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const Loading = styled.div`\r\n padding: 20px;\r\n text-align: center;\r\n font-size: 40px;\r\n line-height:40px;\r\n height:250px;\r\n`\r\n\r\nexport const LinkWrapper = styled(Link)`\r\n  text-decoration: none;\r\n  color:#777\r\n`\r\n\r\nexport const SpotListCard = styled.div`\r\n cursor: pointer;\r\n min-height: 200px;\r\n position: relative;\r\n margin: 50px 30px;\r\n padding: 15px 30px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n .SpotListImg{\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  right: 20px;\r\n  width:150px;\r\n  height:150px;\r\n }\r\n  &:after {\r\n   z-index: -1;\r\n   position: absolute;\r\n   bottom: 10px;\r\n   left: 10px;\r\n   content: '${(props)=>props.index}';\r\n   font-size: 80px;\r\n   color: #888;\r\n   opaticy: 0.2;\r\n   transform: skewX(-36deg);\r\n  }\r\n`\r\n\r\nexport const SpotTitle = styled.div`\r\n font-size: 25px;\r\n font-weight: 800;\r\n text-align: center;\r\n line-height: 75px;\r\n height: 75px;\r\n width: 100%;\r\n background: whitesmoke;\r\n color: #888;\r\n`\r\n\r\nexport const CardTitle = styled.div`\r\n font-size: 25px;\r\n padding:10px 30px;\r\n`\r\n\r\nexport const CardSubTitle = styled.div`\r\n font-size: 15px;\r\n padding:10px 35px;\r\n`\r\n\r\nexport const SpotContent = styled.div`\r\n max-width:500px;\r\n margin-top: 10px;\r\n padding:0px 30px;\r\n`\r\n\r\nexport const Navbar = styled.div`\r\n display: flex;\r\n justify-content: center;\r\n flex-wrap: wrap;\r\n line-height: 50px;\r\n min-height: 50px;\r\n background: whitesmoke;\r\n`\r\n\r\nexport const NavItem = styled(Link)`\r\n text-decoration: none;\r\n cursor: pointer;\r\n border: 1px solid white;\r\n margin:5px;\r\n padding:10px;\r\n color: #888;\r\n font-weight: 800;\r\n font-size: 10px;\r\n &:hover {\r\n  background:white;\r\n  color: #666;\r\n }\r\n &:focus{\r\n  background:white;\r\n  color: #666;\r\n }\r\n  `","import React, { useRef, useCallback } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { ActionCreators } from '../store';\r\nimport { SpotListCard, CardTitle, SpotContent, CardSubTitle, Loading, LinkWrapper } from '../style';\r\n\r\nfunction SpotCityList(props){\r\n   const { SpotCityList, handleLoading, handleHasMoreList } = props;\r\n   const list = SpotCityList.toJS();\r\n   \r\n   const urlParams = useParams(); \r\n   \r\n   const citylist = list.map(data=>{\r\n    let [result] = Object.values(data).slice(0,1)\r\n    return result\r\n   })\r\n\r\n   const cityIndex = citylist.indexOf(`${urlParams.cityname}`)\r\n\r\n   const cityCN = list[cityIndex].CityName;\r\n\r\n   const cityEN = list[cityIndex].CityNameEN;\r\n\r\n   const prevState = list[cityIndex].Citylist;\r\n   \r\n   const listIndex = list[cityIndex].Citylist.length\r\n\r\n   const hasMore = list[cityIndex].hasMore;\r\n\r\n   const loading = list[cityIndex].loading;\r\n\r\n   const observer = useRef() \r\n\r\n   const lastElementRef = useCallback((node) => {\r\n      if(observer.current) observer.current.disconnect()\r\n      observer.current = new IntersectionObserver(entries => {\r\n        if(entries[0].isIntersecting){\r\n          handleLoading(cityIndex)\r\n          handleHasMoreList(cityEN, cityIndex, prevState, hasMore, listIndex, loading) \r\n        }\r\n      })\r\n      if(node) observer.current.observe(node)\r\n   },[cityEN, cityIndex, prevState, listIndex, hasMore, loading, handleHasMoreList, handleLoading])\r\n\r\n   if(list.length === 0 && !loading){\r\n    return <Loading>Loading...</Loading>\r\n   }else{\r\n    return (\r\n      list.map((items)=>{\r\n        if(items.CityName === urlParams.cityname){\r\n          return items.Citylist.map((item, index)=>{\r\n            const { ID, Name, Address, Description } = item;\r\n            const Picture = item.Picture\r\n            if(items.Citylist.length === index + 1){\r\n              return (\r\n                 <LinkWrapper key={ID} to={`${cityCN}/scenicSpotDetail/${ID}`}>\r\n                  <SpotListCard index={index + 1} ref={lastElementRef}>\r\n                    <CardTitle>{Name}</CardTitle>\r\n                    <CardSubTitle>{Address}</CardSubTitle>\r\n                    <SpotContent>{Description ? Description : '沒有簡介'}</SpotContent>\r\n                    <img className='SpotListImg' alt={Picture.PictureDescription1} src={Picture.PictureUrl1 ? Picture.PictureUrl1 : '沒有圖片'}/>\r\n                  </SpotListCard>\r\n                </LinkWrapper>\r\n              )\r\n            } else{\r\n              return (\r\n                <LinkWrapper key={ID} to={`${cityCN}/scenicSpotDetail/${ID}`}>\r\n                  <SpotListCard index={index + 1}>\r\n                    <CardTitle>{Name}</CardTitle>\r\n                    <CardSubTitle>{Address}</CardSubTitle>\r\n                    <SpotContent>{Description ? Description : '沒有簡介'}</SpotContent>\r\n                    <img className='SpotListImg' alt={Picture.PictureDescription1} src={Picture.PictureUrl1 ? Picture.PictureUrl1 : '沒有圖片'}/>\r\n                  </SpotListCard>\r\n                </LinkWrapper>\r\n              )\r\n            } \r\n        })\r\n      }else{\r\n        return null\r\n      }\r\n      })\r\n    )\r\n   }\r\n}\r\n\r\nconst mapState = (state) => {\r\n return {\r\n  SpotCityList: state.getIn(['spotCity','City'])\r\n }\r\n}\r\n\r\nconst mapdispatch = (dispatch) => {\r\n  return {\r\n    handleLoading(index){\r\n      dispatch(ActionCreators.loading(index))\r\n    },\r\n    handleHasMoreList(city, cityIndex, prevState, hasMore, index, loading){\r\n      dispatch(ActionCreators.getMoreSpotCityList(city, cityIndex, prevState, hasMore, index, loading))\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapState, mapdispatch)(SpotCityList)  ","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { ActionCreators } from '../store';\r\nimport { Navbar, NavItem } from '../style';\r\n\r\n\r\nfunction CityNavbar (props){\r\n  const { City, handleSpotCityList } = props;\r\n  const list = City.toJS();\r\n\r\n  return (\r\n    <Navbar>\r\n      {list.map((item,index)=>{\r\n        const { CityName, CityNameEN, Citylist } = item\r\n      return (\r\n        <NavItem\r\n         to={`/scenicSpot/city/${CityName}`}\r\n         key={CityNameEN}\r\n         onClick={()=>{handleSpotCityList(CityNameEN, index, Citylist)}}\r\n         >       \r\n          {(item.CityName)}\r\n        </NavItem>\r\n      )\r\n      })}\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nconst mapState = (state) => {\r\n return {\r\n  City : state.getIn(['spotCity','City'])\r\n }\r\n}\r\n\r\nconst mapDispatch = (dispatch) => {\r\n return {\r\n  handleSpotCityList(city, index, list){\r\n   dispatch(ActionCreators.getSpotCityList(city, index, list))\r\n  } \r\n }\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(CityNavbar)","import React, { Component } from 'react';\r\nimport SpotCityList from './components/SpotCityList';\r\nimport CityNavbar from './components/CityNavbar';\r\n\r\nclass ScenicSpotCity extends Component {\r\n \r\n render(){\r\n  return (\r\n   <>\r\n    <CityNavbar />\r\n    <SpotCityList />\r\n   </>\r\n  )\r\n }\r\n}\r\n\r\n\r\n\r\nexport default ScenicSpotCity","import styled from 'styled-components';\r\n\r\nexport const  DetailCard = styled.div`\r\n padding: 50px;\r\n`\r\n\r\nexport const DetailContent = styled.div`\r\n padding: 20px;\r\n display: flex;\r\n flex-direction: column;\r\n justify-content: center;\r\n align-items: center;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n`\r\n\r\nexport const  DetailTitle = styled.div`\r\n margin: 50px;\r\n font-weight: bold;\r\n text-align: center;\r\n font-size: 30px;\r\n background: white;\r\n`\r\n\r\nexport const DetailTime = styled.div`\r\n display: flex;\r\n color:#666;\r\n font-size: 15px;\r\n flex-direction: row;\r\n flex-wrap: wrap;\r\n justify-content: center;\r\n align-items: center;  \r\n padding: 5px;\r\n background: #888;\r\n`\r\n\r\nexport const DetailSrcUpdateTime = styled.div`\r\npadding:20px;\r\nbackground: whitesmoke;\r\n`\r\n\r\nexport const DetailUpdateTime = styled.div`\r\npadding:20px;\r\nbackground: whitesmoke;\r\n`\r\n\r\nexport const DetailSubscription = styled.div`\r\n margin-top: 50px;\r\n padding:50px 20px;\r\n font-size:25px;\r\n background: whitesmoke;\r\n`\r\n\r\nexport const DetailPhone = styled.div`\r\n background: whitesmoke;\r\n align-self: flex-start;\r\n`\r\n\r\nexport const DetailAddress = styled.div`\r\n background: whitesmoke;\r\n align-self: flex-start;\r\n`\r\n\r\nexport const DetailZipCode = styled.div`\r\n background: whitesmoke;\r\n align-self: flex-start;\r\n`\r\n\r\nexport const DetailTravelInfo = styled.div`\r\n background: whitesmoke;\r\n align-self: flex-start;\r\n`\r\n\r\nexport const DetailOpenTime = styled.div`\r\n background: whitesmoke;\r\n align-self: flex-start;\r\n`\r\n\r\nexport const DetailPicture = styled.div`\r\n background: url(${(props)=>props.img});\r\n background-position: center;\r\n background-repeat: no-repeat;\r\n background-size: cover;\r\n height:500px;\r\n width:100%;\r\n`\r\n\r\nexport const DetailWrapper = styled.div`\r\n display: flex;\r\n flex-direction: row;\r\n justify-content: space-between;\r\n width:100%;\r\n`\r\n\r\nexport const DetailTicketInfo = styled.div`\r\n background-color: #aaaa;\r\n padding: 10px;\r\n color: whitesmoke;\r\n font-weight: bold;\r\n`\r\n\r\nexport const DetailRemarks = styled.div`\r\n background-color: coral;\r\n padding: 10px;\r\n color: red;\r\n font-weight: bold;\r\n`\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { DetailCard, DetailContent, DetailTime, DetailTitle, DetailSubscription, DetailSrcUpdateTime, DetailUpdateTime, DetailPhone, DetailAddress, DetailZipCode, DetailTravelInfo, DetailOpenTime, DetailPicture, DetailWrapper, DetailTicketInfo, DetailRemarks } from '../style';\r\nimport { ActionCreators } from '../store';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst handleDateFormat = (Date) =>{\r\n  let startIndex = Date.indexOf('T')\r\n  let Year = Date.slice(0,startIndex)\r\n  let lastIndex = Date.lastIndexOf('+08:00')\r\n  let Time = Date.slice(startIndex + 1,lastIndex)\r\n  console.log(Year,Time)\r\n  return `${Year} ${Time}`\r\n}\r\n\r\nfunction CityDetail(props){\r\n  const { CityDetail, handleCityDetail } = props;\r\n  const url = useParams();\r\n  const Detail = CityDetail.toJS();\r\n  if(Detail.length === 0){\r\n    handleCityDetail(url.detailId)\r\n   return null\r\n   }else{\r\n    const prevID = Detail[0].ID;\r\n    if(url.detailId !== prevID){\r\n      handleCityDetail(url.detailId)\r\n    }\r\n    return (\r\n    <DetailCard>\r\n      <DetailContent>\r\n       <DetailTitle>{Detail[0].Name}</DetailTitle>\r\n       <DetailTime>\r\n         <DetailSrcUpdateTime>觀光局檔案更新時間:{handleDateFormat(Detail[0].SrcUpdateTime)}</DetailSrcUpdateTime>\r\n         <DetailUpdateTime>本平台資料更新時間:{handleDateFormat(Detail[0].UpdateTime)}</DetailUpdateTime>\r\n       </DetailTime>\r\n        \r\n       <DetailSubscription>{Detail[0].DescriptionDetail ? Detail[0].DescriptionDetail : '沒有資訊'}</DetailSubscription>\r\n       <DetailPhone>服務電話:{Detail[0].Phone ? Detail[0].Phone : '沒有資訊'}</DetailPhone>\r\n       <DetailAddress>景點地址:{Detail[0].Address ? Detail[0].Address : '沒有資訊'}</DetailAddress>\r\n       <DetailZipCode>郵遞區號:{Detail[0].ZipCode ? Detail[0].ZipCode : '沒有資訊'}</DetailZipCode>\r\n       <DetailTravelInfo>交通資訊:{Detail[0].TravelInfo ? Detail[0].TravelInfo : '沒有資訊'}</DetailTravelInfo>\r\n       <DetailOpenTime>開放時間:{Detail[0].OpenTime ? Detail[0].OpenTime : '沒有資訊'}</DetailOpenTime>\r\n       <DetailPicture img={Detail[0].Picture.PictureUrl1 ? Detail[0].Picture.PictureUrl1 : '沒有圖片'}></DetailPicture>\r\n          <DetailWrapper>\r\n              <DetailTicketInfo>票價資訊:{Detail[0].TicketInfo ? Detail[0].TicketInfo : '沒有資訊'}</DetailTicketInfo>\r\n              <DetailRemarks>警告及注意事項:{Detail[0].Remarks ? Detail[0].Remarks : '沒有資訊'}</DetailRemarks>\r\n          </DetailWrapper> \r\n      </DetailContent>\r\n     </DetailCard>\r\n    )\r\n   }\r\n}\r\n\r\n\r\nconst mapState = (state) =>{\r\n return {\r\n  CityDetail: state.getIn(['spotDetail', 'CityDetail']),\r\n }\r\n}\r\n\r\nconst mapDispatch = (dispatch) =>{\r\n return {\r\n   handleCityDetail(id){\r\n    dispatch(ActionCreators.getCityDetail(id))\r\n   }\r\n }\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(CityDetail)","import React, { Component } from 'react';\r\nimport CityDetail from './components/CityDetail';\r\n\r\nclass SpotDetail extends Component{\r\nrender(){\r\n    return (\r\n    <CityDetail />\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default SpotDetail","import styled from 'styled-components';\r\n\r\nexport const ScenicMapWrapper = styled.div`\r\n position: relative;\r\n display: grid;\r\n grid-template-columns: 500px auto;\r\n grid-template-rows: 80vh;\r\n  grid-template-areas:\r\n    \"side main\"\r\n`\r\n\r\nexport const SideNavbarWrapper = styled.div`\r\n grid-area: side;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n padding: 10px 10px;\r\n overflow-y: scroll;\r\n::-webkit-scrollbar {\r\n width: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n background: #f1f1f1;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n background: green;\r\n}\r\n\r\n::-webkit-scrollbar-thumb:hover {\r\n background: green;\r\n}\r\n`\r\n\r\nexport const NavbarCityNav = styled.div`\r\n display: flex;\r\n flex-direction: row;\r\n flex-wrap: wrap;\r\n justify-content: center;\r\n margin-top: 10px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n padding: 5px 10px;\r\n`\r\nexport const NavItemWrapper = styled.div`\r\n cursor: pointer;\r\n border-radius: 23px;\r\n display: flex;\r\n flex-direction: column;\r\n margin: 20px 10px;\r\n padding: 15px 30px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n` \r\n\r\nexport const NavbarCityNavItem = styled.div`\r\n margin: 10px 2.5px 0px 2.5px;\r\n border-radius: 23px;\r\n width: 100px;\r\n cursor: pointer;\r\n text-align: center;\r\n font-size: 10px;\r\n padding: 10px;\r\n box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);\r\n`\r\n\r\n\r\n\r\nexport const NavItemTitle = styled.div`\r\n font-size: 20px;\r\n font-weight: bold;\r\n text-align: center;\r\n`\r\n\r\nexport const NavItemAddress = styled.div`\r\n margin:20px 2.5px;\r\n font-size: 10px;\r\n font-weight: 600;\r\n`\r\n\r\nexport const NavItemPhone = styled.div`\r\n margin:20px 2.5px;\r\n font-size: 10px;\r\n font-weight: 400;\r\n text-align: end;\r\n`\r\n\r\nexport const MapNav = styled.div`\r\n background-color: rgba(35, 55, 75, 0.9);\r\n grid-area: main;\r\n color: #ffffff;\r\n padding: 6px 12px;\r\n font: 15px/24px monospace;\r\n z-index: 1;\r\n position: absolute;\r\n top: 0;\r\n left: 0;\r\n margin: 12px;\r\n border-radius: 4px;\r\n`\r\n\r\n\r\nexport const MapContent = styled.div`\r\n overflow: hidden;\r\n position: absolute;\r\n grid-area: main;\r\n top: 0;\r\n right: 0;\r\n left: 0;\r\n bottom: 0;\r\n .mapboxgl-control-container{\r\n  display:none;\r\n }\r\n .mapCard{\r\n     position: absolute;\r\n     padding: 10px;\r\n     top: -250px;\r\n     left: -160px;\r\n     background: red;\r\n     height: 200px;\r\n     width: 300px;\r\n     .mapCardTitle{\r\n      font-size: 20px;\r\n      text-align: center;\r\n      color: snow;\r\n      margin: 20px;\r\n     }\r\n     .mapCardAddress{\r\n      font-size:15px;\r\n      text-align: center;\r\n      color: snow;\r\n      margin: 10px;\r\n     }\r\n     .mapCardBtn{\r\n      display: flex;\r\n      margin: 40px auto;\r\n      padding: 10px;\r\n      font-weight: bold;\r\n      cursor: pointer;\r\n      font-size: 20px;\r\n      border: 1px solid black;\r\n      color: black;\r\n     }\r\n }\r\n .mapboxgl-popup {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n }\r\n .mapboxgl-popup-close-button {\r\n  position: absolute;\r\n  font-size: 20px;\r\n  border: 3px solid black;\r\n  border-radius: 35px;\r\n  top: -260px;\r\n  right: -170px;\r\n }\r\n`\r\n\r\n\r\n\r\n\r\n  ","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { ActionCreators as CityListCreators } from '../../ScenicSpotCity/store';\r\nimport { ActionCreators as MapboxCreators } from '../store';\r\nimport { SideNavbarWrapper, NavbarCityNav, NavbarCityNavItem, NavItemWrapper, NavItemTitle, NavItemAddress, NavItemPhone } from '../style';\r\n\r\nfunction SideNavbar(props) {\r\n\r\n  const { CityAll,City, cityIndex, lng, lat, handleSpotList, handleSpotCityList, handleSpotIndex, handleLng, handleLat, handleZoom, handleNewCoordinates } = props;\r\n\r\n  const listAll = CityAll;\r\n\r\n  const list = City.toJS();\r\n  \r\n return (\r\n  <SideNavbarWrapper>\r\n   <NavbarCityNav>\r\n     {getNavCityNameList(listAll, list, handleSpotList, handleSpotCityList, handleSpotIndex)}\r\n   </NavbarCityNav>\r\n     {getNavCityList(list, cityIndex, lng, lat, handleLng, handleLat, handleZoom, handleNewCoordinates)}\r\n   </SideNavbarWrapper>\r\n )\r\n}\r\n\r\nconst getNavCityNameList = (listAll, list, handleSpotList, handleSpotCityList, handleSpotIndex) =>{\r\n  return(\r\n    <>\r\n     <NavbarCityNavItem onClick={()=>{handleSpotList(listAll)}}>全部</NavbarCityNavItem>\r\n      {\r\n        list.map((item, index) =>{\r\n        return (\r\n          <NavbarCityNavItem key={item.CityName}\r\n            onClick={()=>{\r\n              handleSpotCityList(item.CityNameEN, index, item.Citylist)\r\n              handleSpotIndex(index)\r\n              }}>\r\n            {item.CityName}\r\n          </NavbarCityNavItem>\r\n           )\r\n        })\r\n      }\r\n    </>\r\n    )\r\n}\r\n\r\nconst getNavCityList = (list, cityIndex, lng, lat, handleLng, handleLat, handleZoom, handleNewCoordinates) =>{\r\n  if(cityIndex !== undefined && list[cityIndex].Citylist !== []){\r\n     return list[cityIndex].Citylist.map((item) =>{\r\n      return (\r\n        <NavItemWrapper\r\n              key={item.ID}\r\n              onClick={() =>{\r\n              handleLat(Number(item.Position.PositionLat));\r\n              handleLng(Number(item.Position.PositionLon));\r\n              handleZoom(12)\r\n              handleNewCoordinates(lng, lat, item.Position.PositionLon, item.Position.PositionLat)\r\n          }}>\r\n          <NavItemTitle>{item.Name}</NavItemTitle>\r\n          <NavItemAddress>{item.Address}</NavItemAddress>\r\n          <NavItemPhone>{item.Phone}</NavItemPhone>\r\n        </NavItemWrapper>\r\n       )\r\n     })\r\n  }else{\r\n   return (<div>請選一個縣市</div>)\r\n  }\r\n}\r\n\r\nconst mapState = (state) =>{\r\n  return {\r\n    City: state.getIn(['spotCity','City']),\r\n    cityIndex: state.getIn(['SpotMap','cityIndex']),\r\n    lng: state.getIn(['SpotMap','lng']),\r\n    lat: state.getIn(['SpotMap','lat'])\r\n  }\r\n}\r\n\r\nconst mapdispatch = (dispatch) =>{\r\n  return {\r\n  handleSpotCityList(cityEN, index, list){\r\n   dispatch(CityListCreators.getSpotCityList(cityEN, index, list))\r\n  },\r\n  handleSpotIndex(index){\r\n   dispatch(MapboxCreators.getSpotCityIndex(index))\r\n  },\r\n  handleLng(lng){\r\n   dispatch(MapboxCreators.fixLngChange(lng))\r\n  },\r\n  handleLat(lat){\r\n   dispatch(MapboxCreators.fixLatChange(lat))\r\n  },\r\n  handleZoom(zoom){\r\n   dispatch(MapboxCreators.fixZoomChange(zoom))\r\n  },\r\n  handleNewCoordinates(prevlng, prevlat, lng, lat){\r\n   dispatch(MapboxCreators.fixNewCoordinates(prevlng, prevlat, lng, lat))\r\n  }\r\n}\r\n}\r\n\r\nexport default connect(mapState, mapdispatch)(SideNavbar)","import React, { useRef, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { MapContent } from '../style';\r\nimport * as ActionCreators from '../store/ActionCreators';\r\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\r\nimport markerPng from '../../../assets/mapbox/nowMarker.png'\r\n \r\nmapboxgl.workerClass = MapboxWorker;\r\nmapboxgl.accessToken = 'pk.eyJ1IjoidmluY2VudDE5OTYxMTEyIiwiYSI6ImNrbWJuOWJpZzFvMWgyb2xhcnhjdjdieG8ifQ.dQitPZUergSwkepHFAJPhA';\r\n\r\nfunction SideNavbar(props) {\r\n\r\n const { lng, lat, zoom, isNewCoordinates, stores, handleGetAllCity } = props;\r\n \r\n let mapContainer = useRef() \r\n\r\n const Stores = stores.toJS();\r\n\r\n useEffect(() => {\r\n  handleGetAllCity()\r\n }, [handleGetAllCity])\r\n\r\n useEffect(() =>{\r\n  const map = new mapboxgl.Map({\r\n   container: mapContainer.current,\r\n   style:'mapbox://styles/mapbox/outdoors-v11',\r\n   center:[lng, lat],\r\n   zoom: zoom\r\n  })\r\n\r\n  map.on('load', () => {\r\n\r\n  map.loadImage(markerPng,function (error, image) {\r\n  \r\n    if (error) throw error;\r\n\r\n      map.addImage('cityMarker', image);\r\n\r\n      map.addSource(\r\n        'points', {\r\n        'type': 'geojson',\r\n        'data': Stores\r\n      });\r\n      \r\n      map.addLayer({\r\n        'id': 'points',\r\n        'type': 'symbol',\r\n        'source': 'points',\r\n        'layout': {\r\n        'icon-image': 'cityMarker',\r\n        'icon-size': 0.2\r\n        }\r\n      });\r\n    }\r\n    );\r\n  \r\n  if(!isNewCoordinates){\r\n    flyToStore(map, lng, lat)\r\n  }\r\n\r\n  });\r\n\r\n  map.on('click', 'points', function (e) {\r\n    CreatorPopup(map, e)\r\n  });\r\n  \r\n  map.on('mouseenter', 'points', function () {\r\n  map.getCanvas().style.cursor = 'pointer';\r\n  });\r\n  \r\n  map.on('mouseleave', 'points', function () {\r\n  map.getCanvas().style.cursor = '';\r\n  });\r\n\r\n  return () => map.remove();\r\n\r\n },[Stores, lng, lat, zoom, isNewCoordinates]);\r\n\r\n  function flyToStore(map, lng, lat) {\r\n    map.flyTo({\r\n      center: [lng, lat],\r\n      zoom: 15\r\n    });\r\n  }\r\n\r\n  function CreatorPopup(map, e){\r\n    \r\n  let coordinates = e.features[0].geometry.coordinates;\r\n  let name = e.features[0].properties.name;\r\n  let address = e.features[0].properties.address;\r\n\r\n  while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\r\n  coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\r\n  }\r\n  \r\n  const popup = new mapboxgl.Popup()\r\n  popup.setLngLat(coordinates).setHTML(`\r\n    <div class=\"mapCard\">\r\n    <div class=\"mapCardTitle\">${name}</div>\r\n    <div class=\"mapCardAddress\">${address}</div>\r\n    <button class=\"mapCardBtn\">閱讀詳情</button>\r\n    </div>\r\n  `).addTo(map);\r\n  }\r\n\r\n return (\r\n    <>\r\n     <MapContent ref={mapContainer}>\r\n       {/* <MapNav>Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}</MapNav> */}\r\n     </MapContent>\r\n   </>\r\n )\r\n}\r\n\r\nconst mapState = (state) =>{\r\n return {\r\n  lng: state.getIn(['SpotMap','lng']),\r\n  lat: state.getIn(['SpotMap','lat']),\r\n  zoom: state.getIn(['SpotMap','zoom']),\r\n  stores: state.getIn(['SpotMap','stores']),\r\n  isNewCoordinates: state.getIn(['SpotMap','isNewCoordinates'])\r\n }\r\n}\r\n\r\nconst mapDispatch = (dispatch) =>{\r\n return {\r\n  handleLng(lng){\r\n   dispatch(ActionCreators.fixLngChange(lng))\r\n  },\r\n  handleLat(lat){\r\n   dispatch(ActionCreators.fixLatChange(lat))\r\n  },\r\n  handleZoom(zoom){\r\n   dispatch(ActionCreators.fixZoomChange(zoom))\r\n  },\r\n  handleGetAllCity(){\r\n   dispatch(ActionCreators.GetAllCity())\r\n  }\r\n }\r\n}\r\n\r\nexport default connect(mapState, mapDispatch)(SideNavbar)","export default \"data:image/png;base64,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\"","import React, { Component } from 'react'\r\nimport SideNavbar from './components/SideNavber';\r\nimport Mapbox from './components/Mapbox';\r\nimport { ScenicMapWrapper } from './style';\r\n\r\nclass ScenicSpotMap extends Component {\r\n\r\n render(){\r\n  return (\r\n   <>\r\n   <ScenicMapWrapper>\r\n    <SideNavbar />\r\n    <Mapbox />\r\n   </ScenicMapWrapper>\r\n   </>\r\n  )\r\n }\r\n\r\n}\r\n\r\nexport default ScenicSpotMap","import React, { Component } from 'react';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { GlobalStyle } from './style';\nimport store from './store/index';\nimport Header from './common/header';\nimport home from './pages/home/index';\nimport ScenicSpot from './pages/ScenicSpot';\nimport ScenicSpotCity from './pages/ScenicSpotCity';\nimport SpotDetail from './pages/SpotDetail';\nimport ScenicSpotMap from './pages/ScenicSpotMap';\n\nclass App extends Component {\n  render(){\n    return (\n     <>\n     <GlobalStyle />\n     <Provider store={store}>\n      <BrowserRouter basename={ process.env.PUBLIC_URL }>\n        <Header />\n        <Route path='/' exact component={home}></Route>\n        <Route path='/scenicSpot' exact component={ScenicSpot}></Route>\n        <Route path='/scenicSpot/ScenicSpotMap' exact component={ScenicSpotMap}></Route>\n        <Route path='/scenicSpot/city/:cityname' exact component={ScenicSpotCity}></Route>\n        <Route path='/scenicSpot/scenicSpotDetail/:detailId' exact component={SpotDetail}></Route>\n        <Route path='/scenicSpot/:cityname/scenicSpotDetail/:detailId' exact component={SpotDetail}></Route>\n      </BrowserRouter>\n     </Provider>\n     </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />,document.getElementById('root'));\n"],"sourceRoot":""}